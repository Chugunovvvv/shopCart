{"ast":null,"code":"import _objectSpread from\"D:/frontend componets/shopCart React/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/frontend componets/shopCart React/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import CartHeader from'../cartHeader/cartHeader';import Footer from'../footer/footer';import Cart from'../cart/cart';import{products}from'../../helpers/product';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartBody=function CartBody(){var _useState=useState(products),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var _useState3=useState({price:cart.reduce(function(prev,curr){return prev+curr.priceTotal;},0),count:cart.reduce(function(prev,curr){return prev+curr.count;},0)}),_useState4=_slicedToArray(_useState3,2),total=_useState4[0],setTotal=_useState4[1];useEffect(function(){// подсчет корзины с изменением товаров\nsetTotal({price:cart.reduce(function(prev,curr){return prev+curr.priceTotal;},0),count:cart.reduce(function(prev,curr){return prev+curr.count;},0)});},[cart]);// удаление товара  // первый параметр карт это текущее состояние и возвращаем товары, которые мы отфильтровали по айди (если айди продукта равен айди который хотим удалить, то не будем возвращать в новый массив)\nvar deleteProduct=function deleteProduct(id){setCart(function(cart){return cart.filter(function(tovar){return id!==tovar.id;});});};// увеличение товаров\nvar increase=function increase(id){// действуем также как и в прерыдущем шаге основываясь на текущую корзину карт\nconsole.log('increase',id);setCart(function(cart){// основываемся на текующую карт и создаем новый массив с проверкой\nreturn cart.map(function(tovar){if(tovar.id===id){// если сейчас на итерации находится товар с айди, по которому мы кликнули и должны увеличить\nvar newCount=tovar.count+1;// увеличиваем\nreturn _objectSpread(_objectSpread({},tovar),{},{// деструктурием обьект и меняем в нем значения числа\ncount:newCount,priceTotal:newCount*tovar.price});}return tovar;});});};// уменьшение товара              все тоже самое, только меняем расчеты и доп проверка чтобы меньше 1 нельзя было изменить счетчик\nvar decrease=function decrease(id){console.log('decrease',id);setCart(function(cart){return cart.map(function(tovar){if(tovar.id===id){var newCount=tovar.count-1>1?tovar.count-1:1;return _objectSpread(_objectSpread({},tovar),{},{count:newCount,priceTotal:newCount*tovar.price});}return tovar;});});};// изменение инпута с клавиатуры\nvar changeValue=function changeValue(id,value){setCart(function(cart){return cart.map(function(tovar){if(tovar.id===id){return _objectSpread(_objectSpread({},tovar),{},{count:value,priceTotal:value*tovar.price});}return tovar;});});};// отображение всех товаров       пробегаемся по всему массиву с объетками и выводим каждый товар (записали в переменную товары)\nvar tovars=cart.map(function(tovar){return/*#__PURE__*/_jsx(Cart,{tovar:tovar,deleteProduct:deleteProduct,increase:increase,decrease:decrease,changeValue:changeValue},tovar.id);});return/*#__PURE__*/_jsx(\"div\",{className:\"section-cart__body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"cart\",children:[/*#__PURE__*/_jsx(CartHeader,{}),tovars,/*#__PURE__*/_jsx(Footer,{total:total})]})})});};export default CartBody;","map":{"version":3,"names":["React","useEffect","useState","CartHeader","Footer","Cart","products","jsx","_jsx","jsxs","_jsxs","CartBody","_useState","_useState2","_slicedToArray","cart","setCart","_useState3","price","reduce","prev","curr","priceTotal","count","_useState4","total","setTotal","deleteProduct","id","filter","tovar","increase","console","log","map","newCount","_objectSpread","decrease","changeValue","value","tovars","className","children"],"sources":["D:/frontend componets/shopCart React/src/components/cartBody/cartBody.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport CartHeader from '../cartHeader/cartHeader'\r\nimport Footer from '../footer/footer'\r\nimport Cart from '../cart/cart'\r\nimport {products} from '../../helpers/product'\r\nconst CartBody = () => {\r\n\r\n  \r\n  const [cart, setCart] = useState(products)\r\n  const [total, setTotal] = useState({\r\n    price: cart.reduce((prev, curr) => {return prev + curr.priceTotal}, 0),\r\n    count: cart.reduce((prev, curr) => {return prev + curr.count}, 0)\r\n  })\r\n\r\n  useEffect(() => {   // подсчет корзины с изменением товаров\r\n    setTotal(\r\n      { price: cart.reduce((prev, curr) => {return prev + curr.priceTotal}, 0),\r\n        count: cart.reduce((prev, curr) => {return prev + curr.count}, 0)\r\n      }\r\n    )\r\n  }, [cart])\r\n\r\n\r\n  // удаление товара  // первый параметр карт это текущее состояние и возвращаем товары, которые мы отфильтровали по айди (если айди продукта равен айди который хотим удалить, то не будем возвращать в новый массив)\r\n  const deleteProduct = (id) => {\r\n    setCart((cart) => cart.filter((tovar) => id !== tovar.id) \r\n    )\r\n  }\r\n\r\n  // увеличение товаров\r\n  const increase = (id) => {      // действуем также как и в прерыдущем шаге основываясь на текущую корзину карт\r\n    console.log('increase', id)\r\n    \r\n    setCart((cart) => {  // основываемся на текующую карт и создаем новый массив с проверкой\r\n      return cart.map((tovar) => {\r\n        if (tovar.id === id) {  // если сейчас на итерации находится товар с айди, по которому мы кликнули и должны увеличить\r\n          const newCount = tovar.count + 1;  // увеличиваем\r\n          return {\r\n            ...tovar,  // деструктурием обьект и меняем в нем значения числа\r\n            count: newCount,\r\n            priceTotal: (newCount) * tovar.price\r\n          };\r\n        } \r\n        return tovar\r\n      })\r\n    })\r\n  }\r\n\r\n  // уменьшение товара              все тоже самое, только меняем расчеты и доп проверка чтобы меньше 1 нельзя было изменить счетчик\r\n  const decrease = (id) => {\r\n    console.log('decrease', id)\r\n    \r\n    setCart((cart) => {\r\n      return cart.map((tovar) => {\r\n        if (tovar.id === id) {\r\n          \r\n          const newCount = tovar.count - 1 > 1 ? tovar.count - 1 : 1;\r\n          return {\r\n            ...tovar,\r\n            count: newCount,\r\n            priceTotal: newCount * tovar.price\r\n          };\r\n        } \r\n        return tovar\r\n      })\r\n    })\r\n  }\r\n\r\n// изменение инпута с клавиатуры\r\n\r\nconst changeValue = (id, value) => {\r\n   setCart((cart) => {\r\n    return cart.map((tovar) => {\r\n      if (tovar.id === id) {\r\n        return {\r\n          ...tovar,\r\n          count: value,\r\n          priceTotal: value * tovar.price\r\n        }\r\n      }\r\n      return tovar\r\n    })\r\n   })\r\n}\r\n\r\n\r\n\r\n\r\n  // отображение всех товаров       пробегаемся по всему массиву с объетками и выводим каждый товар (записали в переменную товары)\r\n  const tovars = cart.map((tovar) => {\r\n    return( <Cart tovar={tovar} key={tovar.id} deleteProduct={deleteProduct} increase={increase} decrease={decrease} changeValue={changeValue}/>)\r\n  })\r\n\r\n\r\n  return (\r\n    <div className=\"section-cart__body\">\r\n    <div className=\"container\">\r\n\r\n        <section className=\"cart\">\r\n            <CartHeader/>\r\n           {tovars}\r\n            \r\n            <Footer total={total}/>\r\n\r\n        </section>\r\n\r\n    </div>\r\n</div>\r\n  )\r\n}\r\n\r\nexport default CartBody"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}